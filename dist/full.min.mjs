let e,t=void 0;const n=new Map,o=new Map;let r=!1;const i=[],s=[],a=()=>{const o=[...i];i.length=0,r=!0,requestAnimationFrame(()=>{o.forEach(o=>(o=>{e=o,n.has(o)||n.set(o,[]),t=-1,o.render();const r=s.length;let i=r;for(;i--;)s[r-i-1]();s.length=0,t=void 0})(o)),r=!1,i.length>0&&a()})},l=(e,t)=>{(-1===i.indexOf(e)&&!0===e._isConnected||t)&&i.push(e),r||a()},c=e=>{const t=o.get(e);return o.delete(e),t};let p=1e5;const u=e=>{return{"data-props":(e=>{let t=p.toString(16);return p++,t.length%2&&(t="0"+t),o.set(t,e),t})(e)}},d=e=>(...n)=>((()=>{if(void 0===t)throw new Error("Using hooks outside of a component is forbidden!");t+=1})(),e(...n)),f=o=>{const r=n.get(e);return r[t]?r[t]:(r[t]=o,o)},h=(e,t)=>{(e instanceof NodeList?t.contains(e[0]):t.contains(e))||(t.innerHTML="",e instanceof NodeList?e.forEach(e=>t.appendChild(e)):t.appendChild(e))},_=new Map;const v=(e,t,n={})=>{_.has(e)?console.warn(`Component ${e} was already defined.`):(_.set(e,t),function(e,t){customElements.define(e,class extends HTMLElement{constructor(){super(),this._props={},this._renderer=h,this._isConnected=!1}connectedCallback(){this._shadowRoot||(this._shadowRoot=this.attachShadow({mode:"open"})),this._isConnected||(this._isConnected=!0,l(this))}disconnectedCallback(){this._isConnected&&(this._isConnected=!1,l(this,!0))}render(){const t=this.getAttribute("data-props");t&&(this._props=c(t),this.skipQueue=!0,this.removeAttribute("data-props"));const n=_.get(e)(this._props);this._renderer(n,this._shadowRoot),this.init=!1}attributeChangedCallback(e,t,n){this.init||(this.skipQueue||t===n||l(this),this.skipQueue=!1)}static get observedAttributes(){let e=["data-props"];return t.observedAttributes&&(e=e.concat(t.observedAttributes)),e}})}(e,n))},m=d(()=>(()=>e)()),b=d(()=>m()._shadowRoot),g=d((e,t)=>{const n=f({reducer:e,state:t}),o=m();return[n.state,e=>{n.state=n.reducer(n.state,e),l(o)}]}),C=d(e=>{const[t,n]=g((e,t)=>t.value,e);return[t,e=>n({type:"set_state",value:e})]}),y=d(e=>{const t=f(e);m()._renderer=t}),x=d((e,t)=>{const n=f({effect:e,values:t,cleanUp:()=>{}});if(S()){let e=!1;if(n.values!==t&&n.values&&n.values.length>0){e=!0;let o=n.values.length;for(;o--;)if(t[o]!==n.values[o]){e=!1;break}n.values=t}e||(n.cleanUp(),(e=>{s.push(e)})(()=>{const e=n.effect();e&&(n.cleanUp=e)}))}else n.cleanUp(),n.cleanUp=(()=>{})}),w=d(e=>{const t=m();return[t.getAttribute(e),n=>{t.skipQueue=!0,t.setAttribute(e,n)}]}),N=d((e,...t)=>{let n;n=(n=e instanceof Array?e.map((e,n)=>t[n]?e+t[n]:e).join(""):e).replace(/ +(?= )/g,"").replace(/\n/g,"");const o=b(),r=document.createElement("style");r.innerHTML=n,x(()=>(o.appendChild(r),()=>{o.removeChild(r)}))}),k=d((e,t)=>{m()[e]=((...e)=>t(...e))}),S=d(()=>{return m()._isConnected});function A(){}var L={},U=[],M=[];function T(e,t){for(var n in t)e[n]=t[n];return e}var E="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,B=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,P=[];function W(e){!e._dirty&&(e._dirty=!0)&&1==P.push(e)&&E(H)}function H(){var e,t=P;for(P=[];e=t.pop();)e._dirty&&ee(e)}function R(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function V(e){var t=T({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function $(e){var t=e.parentNode;t&&t.removeChild(e)}function j(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===B.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,O,s):e.removeEventListener(t,O,s),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function O(e){return this._listeners[e.type](e)}var D=[],Q=0,z=!1,F=!1;function I(){for(var e;e=D.pop();)e.componentDidMount&&e.componentDidMount()}function q(e,t,n,o,r,i){Q++||(z=null!=r&&void 0!==r.ownerSVGElement,F=null!=e&&!("__preactattr_"in e));var s=function e(t,n,o,r,i){var s=t,a=z;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=n&&(t.nodeValue=n):(s=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),G(t,!0))),s.__preactattr_=!0,s;var l,c,p=n.nodeName;if("function"==typeof p)return function(e,t,n,o){for(var r=e&&e._component,i=r,s=e,a=r&&e._componentConstructor===t.nodeName,l=a,c=V(t);r&&!l&&(r=r._parentComponent);)l=r.constructor===t.nodeName;return r&&l&&(!o||r._component)?(Z(r,c,3,n,o),e=r.base):(i&&!a&&(te(i),e=s=null),r=X(t.nodeName,c,n),e&&!r.nextBase&&(r.nextBase=e,s=null),Z(r,c,1,n,o),e=r.base,s&&e!==s&&(s._component=null,G(s,!1))),e}(t,n,o,r);if(z="svg"===p||"foreignObject"!==p&&z,p=String(p),(!t||!R(t,p))&&(l=p,(c=z?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l)).normalizedNodeName=l,s=c,t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),G(t,!0)}var u=s.firstChild,d=s.__preactattr_,f=n.children;if(null==d){d=s.__preactattr_={};for(var h=s.attributes,_=h.length;_--;)d[h[_].name]=h[_].value}return!F&&f&&1===f.length&&"string"==typeof f[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||null!=u)&&function(t,n,o,r,i){var s,a,l,c,p,u,d,f,h=t.childNodes,_=[],v={},m=0,b=0,g=h.length,C=0,y=n?n.length:0;if(0!==g)for(var x=0;x<g;x++){var w=h[x],N=w.__preactattr_,k=y&&N?w._component?w._component.__key:N.key:null;null!=k?(m++,v[k]=w):(N||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(_[C++]=w)}if(0!==y)for(var x=0;x<y;x++){p=null;var k=(c=n[x]).key;if(null!=k)m&&void 0!==v[k]&&(p=v[k],v[k]=void 0,m--);else if(!p&&b<C)for(s=b;s<C;s++)if(void 0!==_[s]&&(u=a=_[s],f=i,"string"==typeof(d=c)||"number"==typeof d?void 0!==u.splitText:"string"==typeof d.nodeName?!u._componentConstructor&&R(u,d.nodeName):f||u._componentConstructor===d.nodeName)){p=a,_[s]=void 0,s===C-1&&C--,s===b&&b++;break}p=e(p,c,o,r),l=h[x],p&&p!==t&&p!==l&&(null==l?t.appendChild(p):p===l.nextSibling?$(l):t.insertBefore(p,l))}if(m)for(var x in v)void 0!==v[x]&&G(v[x],!1);for(;b<=C;)void 0!==(p=_[C--])&&G(p,!1)}(s,f,o,r,F||null!=d.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||j(e,o,n[o],n[o]=void 0,z);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||j(e,o,n[o],n[o]=t[o],z)}(s,n.attributes,d),z=a,s}(e,t,n,o,i);return r&&s.parentNode!==r&&r.appendChild(s),--Q||(F=!1,i||I()),s}function G(e,t){var n=e._component;n?te(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||$(e),J(e))}function J(e){for(e=e.lastChild;e;){var t=e.previousSibling;G(e,!0),e=t}}var K={};function X(e,t,n){var o,r=K[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),ne.call(o,t,n)):((o=new ne(t,n)).constructor=e,o.render=Y),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function Y(e,t,n){return this.constructor(e,n)}function Z(e,t,n,o,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===L.syncComponentUpdates&&e.base?W(e):ee(e,1,r)),e.__ref&&e.__ref(e))}function ee(e,t,n,o){if(!e._disable){var r,i,s,a=e.props,l=e.state,c=e.context,p=e.prevProps||a,u=e.prevState||l,d=e.prevContext||c,f=e.base,h=e.nextBase,_=f||h,v=e._component,m=!1;if(f&&(e.props=p,e.state=u,e.context=d,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(a,l,c)?m=!0:e.componentWillUpdate&&e.componentWillUpdate(a,l,c),e.props=a,e.state=l,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!m){r=e.render(a,l,c),e.getChildContext&&(c=T(T({},c),e.getChildContext()));var b,g,C=r&&r.nodeName;if("function"==typeof C){var y=V(r);(i=v)&&i.constructor===C&&y.key==i.__key?Z(i,y,1,c,!1):(b=i,e._component=i=X(C,y,c),i.nextBase=i.nextBase||h,i._parentComponent=e,Z(i,y,0,c,!1),ee(i,1,n,!0)),g=i.base}else s=_,(b=v)&&(s=e._component=null),(_||1===t)&&(s&&(s._component=null),g=q(s,r,c,n||!f,_&&_.parentNode,!0));if(_&&g!==_&&i!==v){var x=_.parentNode;x&&g!==x&&(x.replaceChild(g,_),b||(_._component=null,G(_,!1)))}if(b&&te(b),e.base=g,g&&!o){for(var w=e,N=e;N=N._parentComponent;)(w=N).base=g;g._component=w,g._componentConstructor=w.constructor}}if(!f||n?D.unshift(e):m||e.componentDidUpdate&&e.componentDidUpdate(p,u,d),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);Q||o||I()}}function te(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?te(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,$(t),function(e){var t=e.constructor.name;(K[t]||(K[t]=[])).push(e)}(e),J(t)),e.__ref&&e.__ref(null)}function ne(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}T(ne.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=T({},n)),T(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),W(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),ee(this,2)},render:function(){}});var oe={},re=JSON.stringify;var ie=function(e){for(var t=".",n=0;n<e.length;n++)t+=e[n].length+","+e[n];return(oe[t]||(oe[t]=function(e){for(var t,n,o,r,i,s=0,a="return ",l="",c="",p=0,u="",d="",f="",h=0,_=function(){o?9===s?(p++&&(a+=","),a+="h("+(c||re(l)),s=0):13===s||0===s&&"..."===l?(0===s?(f||(f=")",u=u?"Object.assign("+u:"Object.assign({}"),u+=d+","+c,d=""):r&&(u+=u?","+(d?"":"{"):"{",d="}",u+=re(r)+":",u+=c||(i||l)&&re(l)||"true",r=""),i=!1):0===s&&(s=13,r=l,l=c="",_(),s=0):(c||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))&&(p++&&(a+=","),a+=c||re(l)),l=c=""},v=0;v<e.length;v++){v>0&&(o||_(),c="$["+v+"]",_());for(var m=0;m<e[v].length;m++){if(n=e[v].charCodeAt(m),o){if(39===n||34===n){if(h===n){h=0;continue}if(0===h){h=n;continue}}if(0===h)switch(n){case 62:_(),47!==s&&(a+=u?","+u+d+f:",null"),t&&(a+=")"),o=0,u="",s=1;continue;case 61:s=13,i=!0,r=l,l="";continue;case 47:t||(t=!0,9!==s||l.trim()||(l=c="",s=47));continue;case 9:case 10:case 13:case 32:_(),s=0;continue}}else if(60===n){_(),o=1,f=d=u="",t=i=!1,s=9;continue}l+=e[v].charAt(m)}}return _(),Function("h","$",a)}(e)))(this,arguments)}.bind(function(e,t){var n,o,r,i,s=arguments,a=M;for(i=arguments.length;i-- >2;)U.push(s[i]);for(t&&null!=t.children&&(U.length||U.push(t.children),delete t.children);U.length;)if((o=U.pop())&&void 0!==o.pop)for(i=o.length;i--;)U.push(o[i]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?a[a.length-1]+=o:a===M?a=[o]:a.push(o),n=r;var l=new A;return l.nodeName=e,l.children=a,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,l});const se=d(()=>(y((e,t)=>{!function(e,t){!function(e,t,n){q(n,e,{},!1,t,!1)}(e,t,t.firstElementChild)}(e,t)}),[ie]));export{v as defineComponent,u as prps,g as useReducer,C as useState,x as useEffect,w as useAttribute,N as useCSS,k as useExposeMethod,y as useRenderer,m as useHostElement,b as useShadowRoot,S as useConnectedState,se as usePreactHtm};
//# sourceMappingURL=full.min.mjs.map
