!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).funcyjs={})}(this,function(e){"use strict";let t,s=void 0;const n=new Map,o=new Map;let i=!1;const r=[],a=[],c=()=>{const e=[...r];r.length=0,i=!0,requestAnimationFrame(()=>{e.forEach(e=>(e=>{t=e,n.has(e)||n.set(e,[]),s=-1,e.render();const o=a.length;let i=o;for(;i--;)a[o-i-1]();a.length=0,s=void 0})(e)),i=!1,r.length>0&&c()})},d=(e,t)=>{(-1===r.indexOf(e)&&!0===e._isConnected||t)&&r.push(e),i||c()},u=e=>{const t=o.get(e);return o.delete(e),t};let l=1e5;const h=e=>(...t)=>((()=>{if(void 0===s)throw new Error("Using hooks outside of a component is forbidden!");s+=1})(),e(...t)),p=e=>{const o=n.get(t);return o[s]?o[s]:(o[s]=e,e)},f=(e,t)=>{(e instanceof NodeList?t.contains(e[0]):t.contains(e))||(t.innerHTML="",e instanceof NodeList?e.forEach(e=>t.appendChild(e)):t.appendChild(e))},_=new Map;const b=h(()=>(()=>t)()),C=h(()=>b()._shadowRoot),g=h((e,t)=>{const s=p({reducer:e,state:t}),n=b();return[s.state,e=>{s.state=s.reducer(s.state,e),d(n)}]}),v=h(e=>{const[t,s]=g((e,t)=>t.value,e);return[t,e=>s({type:"set_state",value:e})]}),m=h(e=>{const t=p(e);b()._renderer=t}),w=h((e,t)=>{const s=p({effect:e,values:t,cleanUp:()=>{}});if(E()){let e=!1;if(s.values!==t&&s.values&&s.values.length>0){e=!0;let n=s.values.length;for(;n--;)if(t[n]!==s.values[n]){e=!1;break}s.values=t}e||(s.cleanUp(),(e=>{a.push(e)})(()=>{const e=s.effect();e&&(s.cleanUp=e)}))}else s.cleanUp(),s.cleanUp=(()=>{})}),k=h(e=>{const t=b();return[t.getAttribute(e),s=>{t.skipQueue=!0,t.setAttribute(e,s)}]}),A=h((e,...t)=>{let s;s=(s=e instanceof Array?e.map((e,s)=>t[s]?e+t[s]:e).join(""):e).replace(/ +(?= )/g,"").replace(/\n/g,"");const n=C(),o=document.createElement("style");o.innerHTML=s,w(()=>(n.appendChild(o),()=>{n.removeChild(o)}))}),y=h((e,t)=>{b()[e]=((...e)=>t(...e))}),E=h(()=>{return b()._isConnected});e.defineComponent=((e,t,s={})=>{_.has(e)?console.warn(`Component ${e} was already defined.`):(_.set(e,t),function(e,t){customElements.define(e,class extends HTMLElement{constructor(){super(),this._props={},this._renderer=f,this._isConnected=!1}connectedCallback(){this._shadowRoot||(this._shadowRoot=this.attachShadow({mode:"open"})),this._isConnected||(this._isConnected=!0,d(this))}disconnectedCallback(){this._isConnected&&(this._isConnected=!1,d(this,!0))}render(){const t=this.getAttribute("data-props");t&&(this._props=u(t),this.skipQueue=!0,this.removeAttribute("data-props"));const s=_.get(e)(this._props);this._renderer(s,this._shadowRoot),this.init=!1}attributeChangedCallback(e,t,s){this.init||(this.skipQueue||t===s||d(this),this.skipQueue=!1)}static get observedAttributes(){let e=["data-props"];return t.observedAttributes&&(e=e.concat(t.observedAttributes)),e}})}(e,s))}),e.prps=(e=>{return{"data-props":(e=>{let t=l.toString(16);return l++,t.length%2&&(t="0"+t),o.set(t,e),t})(e)}}),e.createHook=h,e.useReducer=g,e.useState=v,e.useEffect=w,e.useAttribute=k,e.useCSS=A,e.useExposeMethod=y,e.useRenderer=m,e.useHostElement=b,e.useShadowRoot=C,e.useConnectedState=E,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=core.min.js.map
