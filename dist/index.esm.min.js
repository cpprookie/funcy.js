const e=window.___hookusPocusRunMap||new(WeakMap||Map);window.___hookusPocusRunMap=e;const t=e.h||[];e.h=t;const n=e.d||new(WeakMap||Map);e.d=n;const o=o=>(function s(){const r=t[e.stackIndex][0];e.hookIndex++;const c=t[e.stackIndex][e.hookIndex]||(t[e.stackIndex][e.hookIndex]=[{context:r,hook:o}]);return(n.get(s)||o).apply({},c.concat(Array.from(arguments)))}),s=(n,o)=>{const s=t[e.stackIndex].map(e=>{if(e[0]&&e[0][o]){const t=e[0][o]();return e[0][o]=0,t}}).filter(e=>e instanceof Promise);if(s.length>0){const t=Promise.all(s);e.set(n,e.has(n)?e.get(n).then(t):t)}},r=(t,n)=>{if(e.has(t)){const o=e.get(t).then(n);return e.set(t,o),o}return n()},c=function(){const o=Array.from(arguments);let c;return o[0].pop&&(c=o.shift()),((o,c,a,i)=>{if(!0!==c)return r(o,()=>(e.hookIndex=0,e.stackIndex=t.push(n.get(o)||[o])-1,n.set(o,t[e.stackIndex]),s(o,"before"),r(o,()=>{let n=a.apply(a,i);return s(o,"after"),r(o,()=>(t.pop(),e.delete(o),n))})));e.set(o,s(o,"cleanUp")),n.delete(o)})("boolean"==typeof o[1]?o[0]:o[1]||o[0],!0===o[1]||o[2],o[0],c)},a=o((e,t,n,o)=>(e.s=void 0!==e.s?e.s:o?o(n):n,[e.s,n=>(e.s=t(e.s,n),e.s)])),i=o((e,t,n)=>{e.v&&(!n||n.length===e.v.length&&n.every(t=>~e.v.indexOf(t)))||(e.v=n,e.cleanUp&&e.cleanUp(),e.after=(()=>{let n=t();return n instanceof Promise?n=n.then(t=>e.cleanUp=t):e.cleanUp=n,n}))}),u=(e,t)=>{i(()=>new Promise(t=>requestAnimationFrame(n=>t(e()))),t)},d=e=>{const[t,n]=a((e,t)=>t.value,e);return[t,e=>n({value:e})]},h=o(e=>e.context);window.___funcyJsRenderQueue;const p=e=>{const t=new Promise(t=>t(e.render())).then(e=>{(window.___funcyJsRenderQueue=t)&&(window.___funcyJsRenderQueue=void 0)})},f=e=>{window.___funcyJsRenderQueue?window.___funcyJsRenderQueue.then(()=>p(e)):window.___funcyJsRenderQueue=p(e)};var l,w;l=a,w=((e,t,n,o)=>{const[s,r]=e.hook(e,t,n,o);return[s,t=>{const n=r(t);return s!==n&&f(e.context),n}]}),n.set(l,w);const _=new(WeakMap||Map),v=(e,t)=>{const n=h();n.hasAttribute(e)||void 0===t||n.setAttribute(e,t);const o=n.getAttribute(e);let s;return _.has(n)?s=_.get(n):(s=new MutationObserver(e=>{f(n)}),_.set(n,s),s.observe(n,{attributes:!0})),[o,t=>{s.disconnect(),n.setAttribute(e,t),s.observe(n,{attributes:!0})}]},x=o((e,t,n)=>{const o=e.context;let s=e.v;if(!s){let r=!1;if(void 0===o[t]||o.hasOwnProperty(t)){let e=o[t]||n;Object.defineProperty(o,t,{set:t=>{e!==t&&(e=t,r||f(o))},get:()=>e})}s=(e=>{r=!0,o[t]=e,r=!1}),void 0===o[t]&&s(n),e.v=s}return[o[t],s]}),k=o((e,t)=>{e.context.renderer=t});function m(e,t,n){customElements.define(e,class extends HTMLElement{constructor(){super(),this.shadowRoot||this.attachShadow(Object.assign({mode:"open"},n)),f(this)}renderer(e,t){e&&!(e instanceof NodeList?t.contains(e[0]):t.contains(e))&&(t.innerHTML="",e instanceof NodeList?e.forEach(e=>t.appendChild(e)):t.appendChild(e))}render(){const e=c(t,this);return this.renderer(e,this.shadowRoot)}})}export{h as useHostElement,v as useAttribute,x as useProp,k as useRenderer,m as component,a as useReducer,d as useState,u as useEffect};
//# sourceMappingURL=index.esm.min.js.map
