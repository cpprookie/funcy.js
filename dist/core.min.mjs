let e,t=void 0;const s=new Map,n=new Map;let o=!1;const i=[],r=[],a=()=>{const n=[...i];i.length=0,o=!0,requestAnimationFrame(()=>{n.forEach(n=>(n=>{e=n,s.has(n)||s.set(n,[]),t=-1,n.render();const o=r.length;let i=o;for(;i--;)r[o-i-1]();r.length=0,t=void 0})(n)),o=!1,i.length>0&&a()})},c=(e,t)=>{(-1===i.indexOf(e)&&!0===e._isConnected||t)&&i.push(e),o||a()},d=e=>{const t=n.get(e);return n.delete(e),t};let h=1e5;const l=e=>{return{"data-props":(e=>{let t=h.toString(16);return h++,t.length%2&&(t="0"+t),n.set(t,e),t})(e)}},p=e=>(...s)=>((()=>{if(void 0===t)throw new Error("Using hooks outside of a component is forbidden!");t+=1})(),e(...s)),u=n=>{const o=s.get(e);return o[t]?o[t]:(o[t]=n,n)},f=(e,t)=>{(e instanceof NodeList?t.contains(e[0]):t.contains(e))||(t.innerHTML="",e instanceof NodeList?e.forEach(e=>t.appendChild(e)):t.appendChild(e))},g=new Map;const _=(e,t,s={})=>{g.has(e)?console.warn(`Component ${e} was already defined.`):(g.set(e,t),function(e,t={}){customElements.define(e,class extends HTMLElement{constructor(){super(),this._props={},this._renderer=f,this._isConnected=!1}connectedCallback(){this._shadowRoot||(this._shadowRoot=this.attachShadow({mode:"open",...t.shadowOptions?t.shadowOptions:{}})),this._isConnected||(this._isConnected=!0,c(this))}disconnectedCallback(){this._isConnected&&(this._isConnected=!1,c(this,!0))}render(){const t=this.getAttribute("data-props");t&&(this._props=d(t),this.skipQueue=!0,this.removeAttribute("data-props"));const s=g.get(e)(this._props);this._renderer(s,this._shadowRoot),this.init=!1}attributeChangedCallback(e,t,s){this.init||(this.skipQueue||t===s||c(this),this.skipQueue=!1)}static get observedAttributes(){let e=["data-props"];return t.observedAttributes&&(e=e.concat(t.observedAttributes)),e}})}(e,s))},v=p(()=>(()=>e)()),b=p(()=>v()._shadowRoot),C=p((e,t)=>{const s=u({reducer:e,state:t}),n=v();return[s.state,e=>{s.state=s.reducer(s.state,e),c(n)}]}),w=p(e=>{const[t,s]=C((e,t)=>t.value,e);return[t,e=>s({type:"set_state",value:e})]}),m=p(e=>{const t=u(e);v()._renderer=t}),k=p((e,t)=>{const s=u({effect:e,values:t,cleanUp:()=>{}});if(U()){let e=!1;if(s.values!==t&&s.values&&s.values.length>0){e=!0;let n=s.values.length;for(;n--;)if(t[n]!==s.values[n]){e=!1;break}s.values=t}e||(s.cleanUp(),(e=>{r.push(e)})(()=>{const e=s.effect();e&&(s.cleanUp=e)}))}else s.cleanUp(),s.cleanUp=(()=>{})}),A=p(e=>{const t=v();return[t.getAttribute(e),s=>{t.skipQueue=!0,t.setAttribute(e,s)}]}),E=p((e,...t)=>{let s;s=(s=e instanceof Array?e.map((e,s)=>t[s]?e+t[s]:e).join(""):e).replace(/ +(?= )/g,"").replace(/\n/g,"");const n=b(),o=document.createElement("style");o.innerHTML=s,k(()=>(n.appendChild(o),()=>{n.removeChild(o)}))}),M=p((e,t)=>{v()[e]=((...e)=>t(...e))}),U=p(()=>{return v()._isConnected});export{_ as defineComponent,l as prps,p as createHook,C as useReducer,w as useState,k as useEffect,A as useAttribute,E as useCSS,M as useExposeMethod,m as useRenderer,v as useHostElement,b as useShadowRoot,U as useConnectedState};
//# sourceMappingURL=core.min.mjs.map
