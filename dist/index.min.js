!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).funcyjs={})}(this,function(e){"use strict";const t=window.___hookusPocusRunMap||new(WeakMap||Map);window.___hookusPocusRunMap=t;const n=t.h||[];t.h=n;const o=t.d||new(WeakMap||Map);t.d=o;const s=e=>(function s(){const r=n[t.stackIndex][0];t.hookIndex++;const c=n[t.stackIndex][t.hookIndex]||(n[t.stackIndex][t.hookIndex]=[{context:r,hook:e}]);return(o.get(s)||e).apply({},c.concat(Array.from(arguments)))}),r=(e,o)=>{const s=n[t.stackIndex].map(e=>{if(e[0]&&e[0][o]){const t=e[0][o]();return e[0][o]=0,t}}).filter(e=>e instanceof Promise);if(s.length>0){const n=Promise.all(s);t.set(e,t.has(e)?t.get(e).then(n):n)}},c=(e,n)=>{if(t.has(e)){const o=t.get(e).then(n);return t.set(e,o),o}return n()},u=function(){const e=Array.from(arguments);let s;return e[0].pop&&(s=e.shift()),((e,s,u,i)=>{if(!0!==s)return c(e,()=>(t.hookIndex=0,t.stackIndex=n.push(o.get(e)||[e])-1,o.set(e,n[t.stackIndex]),r(e,"before"),c(e,()=>{let o=u.apply(u,i);return r(e,"after"),c(e,()=>(n.pop(),t.delete(e),o))})));t.set(e,r(e,"cleanUp")),o.delete(e)})("boolean"==typeof e[1]?e[0]:e[1]||e[0],!0===e[1]||e[2],e[0],s)},i=s((e,t,n,o)=>(e.s=void 0!==e.s?e.s:o?o(n):n,[e.s,n=>(e.s=t(e.s,n),e.s)])),a=s((e,t,n)=>{e.v&&(!n||n.length===e.v.length&&n.every(t=>~e.v.indexOf(t)))||(e.v=n,e.cleanUp&&e.cleanUp(),e.after=(()=>{let n=t();return n instanceof Promise?n=n.then(t=>e.cleanUp=t):e.cleanUp=n,n}))}),d=s(e=>e.context);window.___funcyJsRenderQueue;const f=e=>{const t=new Promise(t=>t(e.render())).then(e=>{(window.___funcyJsRenderQueue=t)&&(window.___funcyJsRenderQueue=void 0)})},p=e=>{window.___funcyJsRenderQueue?window.___funcyJsRenderQueue.then(()=>f(e)):window.___funcyJsRenderQueue=f(e)};var h,l;h=i,l=((e,t,n,o)=>{const[s,r]=e.hook(e,t,n,o);return[s,t=>{const n=r(t);return s!==n&&p(e.context),n}]}),o.set(h,l);const w=new(WeakMap||Map),_=s((e,t,n)=>{const o=e.context;let s=e.v;if(!s){let r=!1;if(void 0===o[t]||o.hasOwnProperty(t)){let e=o[t]||n;Object.defineProperty(o,t,{set:t=>{e!==t&&(e=t,r||p(o))},get:()=>e})}s=(e=>{r=!0,o[t]=e,r=!1}),void 0===o[t]&&s(n),e.v=s}return[o[t],s]}),x=s((e,t)=>{e.context.renderer=t});e.useHostElement=d,e.useAttribute=((e,t)=>{const n=d();n.hasAttribute(e)||void 0===t||n.setAttribute(e,t);const o=n.getAttribute(e);let s;return w.has(n)?s=w.get(n):(s=new MutationObserver(e=>{p(n)}),w.set(n,s),s.observe(n,{attributes:!0})),[o,t=>{s.disconnect(),n.setAttribute(e,t),s.observe(n,{attributes:!0})}]}),e.useProp=_,e.useRenderer=x,e.component=function(e,t,n){customElements.define(e,class extends HTMLElement{constructor(){super(),this.shadowRoot||this.attachShadow(Object.assign({mode:"open"},n)),p(this)}renderer(e,t){e&&!(e instanceof NodeList?t.contains(e[0]):t.contains(e))&&(t.innerHTML="",e instanceof NodeList?e.forEach(e=>t.appendChild(e)):t.appendChild(e))}render(){const e=u(t,this);return this.renderer(e,this.shadowRoot)}})},e.useReducer=i,e.useState=(e=>{const[t,n]=i((e,t)=>t.value,e);return[t,e=>n({value:e})]}),e.useEffect=((e,t)=>{a(()=>new Promise(t=>requestAnimationFrame(n=>t(e()))),t)}),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
